
<!-- Editor. -->
<div id="editor"></div>

<!-- Exhibit. -->

<div id="neatline">
  

<div id="neatline-map" class="neatline-block"></div>
</div>

<!-- JSON globals. -->
<script type="text/javascript">
  Neatline.global = {"exhibit":{"added":null,"modified":null,"base_layers":null,"base_layer":"OpenStreetMap","title":null,"slug":"slug","description":null,"public":0,"styles":null,"map_focus":null,"map_zoom":null,"id":85},"records_api":"\/neatline\/records\/85","record_api":"\/neatline\/record","base_layers":[{"title":"OpenStreetMap","id":"OpenStreetMap","type":"OpenStreetMap"}],"base_layer":"OpenStreetMap","map_zoom":null,"map_focus":null,"exhibit_put":"\/neatline\/put\/85","styles_api":"\/neatline\/styles\/85","page_length":50}</script>

<!-- Underscore templates. -->


<script id="static-bubble-template" type="text/templates">
  <a name="close" class="close">&times;</a>
  <div class="title" data-html="record._title"></div>
  <div class="body" data-html="record._body"></div>
</script>

<!-- Strings. -->

<script>
  STRINGS = {
    record: {
      save: {
        success: 'The record was saved successfully!',
        error: 'There was an error; the record was not saved.'
      },
      remove: {
        success: 'The record was deleted successfully!',
        error: 'There was an error; the record was not deleted.'
      },
      add: {
        success: 'New record created successfully!',
        error: 'There was an error; a new record was not created.'
      }
    },
    exhibit: {
      save: {
        success: 'The exhibit was saved successfully!',
        error: 'There was an error; the exhibit was not saved.'
      }
    },
    styles: {
      save: {
        success: 'The styles were saved successfully!',
        error: 'There was an error; the styles were not saved.'
      }
    },
    svg: {
      parse: {
        success: 'SVG parsed successfully!',
        error: 'There was an error; SVG could not be parsed.'
      }
    },
    placeholders: {
      title: '[Untitled]'
    }
  };
</script>

<!-- Underscore templates. -->

<script id="exhibit-menu-template" type="text/templates">

  <p class="lead"></p>

  <ul class="nav nav-pills">
    <li class="tab" data-slug="records">
      <a href="#records">Records</a>
    </li>
    <li class="tab" data-slug="styles">
      <a href="#styles">Styles</a>
    </li>
  </ul>

</script>

<script id="exhibit-styles-template" type="text/templates">

  <div class="control-group">

    
<label for="styles">
Stylesheet</label>
<div class="controls">
  <textarea
    id='styles'    name='styles'        data-value='exhibit.styles'  ></textarea>
</div>

    
<label>Default Map Focus</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='map-focus'            data-value='exhibit.map_focus'          />
  </div>
</div>

    
<label>Default Map Zoom</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='map-zoom'            data-value='exhibit.map_zoom'          />
  </div>
</div>

    <div class="controls">
      <div class="inline-inputs">
        <a name="set-focus" class="btn btn-small">
          <i class="icon-map-marker"></i> Use Current Viewport as Default
        </a>
      </div>
    </div>

  </div>

  <div class="actions">
    <a name="save" class="btn btn-large btn-primary" \>
      <i class="icon-ok icon-white"></i> Save    </a>
  </div>

</script>

<script id="record-list-template" type="text/templates">

  <div class="pagination"></div>

  <ul class="list">

    <a href="#records/add">New Record</a>

    <% records.each(function(r) { %>
      <a href="#records/<%= r.get('id') %>" data-id="<%= r.get('id') %>">
        <span class="title">
          <% if (!_.isEmpty(r.get('_title'))) { %>
            <%= _.string.stripTags(r.get('_title')) %>
          <% } else { %>
            <%= STRINGS.placeholders.title %>
          <% } %>
        </span>
        <span class="body">
          <%= _.string.stripTags(r.get('_body')) %>
        </span>
      </a>
    <% }); %>

  </ul>

  <div class="pagination"></div>

</script>

<script id="record-form-template" type="text/templates">

  <!-- Close button. -->
  
<a name="close" class="close">&times;</a>

  <p class="lead">
    <span class="id" data-text="record.id | id"></span>
    <span class="title" data-text="record.title | title"></span>
  </p>

  <ul class="nav nav-pills">
    <li><a href="#record-form-text" data-toggle="tab">Text</a></li>
    <li><a href="#record-form-spatial" data-toggle="tab">Spatial</a></li>
    <li><a href="#record-form-style" data-toggle="tab">Style</a></li>
  </ul>

  <div class="tab-content">

    <div class="tab-pane text" id="record-form-text">
      
<div class="control-group">

  
<label>Item</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='item-id'            data-value='record.item_id'          />
  </div>
</div>

  
<label for="title">
Title</label>
<div class="controls">
  <textarea
        name='title'        data-value='record.title'  ></textarea>
</div>

  
<label for="body">
Body</label>
<div class="controls">
  <textarea
        name='body'        data-value='record.body'  ></textarea>
</div>

</div>
    </div>

    <div class="tab-pane spatial" id="record-form-spatial">
      
<div class="control-group spatial">

  <label class="radio">
    <input type="radio" name="mode" value="pan" checked>
    Navigate
  </label>

  <label class="radio">
    <input type="radio" name="mode" value="point">
    Draw Point
  </label>

  <label class="radio">
    <input type="radio" name="mode" value="line">
    Draw Line
  </label>

  <label class="radio">
    <input type="radio" name="mode" value="poly">
    Draw Polygon
  </label>

  <label class="radio">
    <input type="radio" name="mode" value="svg">
    Draw SVG ( <a href="#svg-modal" data-toggle="modal">Enter Markup</a> )
  </label>

  <label class="radio">
    <input type="radio" name="mode" value="regPoly">
    Draw Regular Polygon
  </label>

  <div class="control-group indent regular-polygon">

    <div class="inline-inputs">
      <input type="text" name="sides" value="3" />
      Sides
    </div>

    <div class="inline-inputs">
      <input type="text" name="snap" value="5" />
      Snap Angle (degrees)
    </div>

    <label class="checkbox">
      <input type="checkbox" name="irreg">
      Irregular?
    </label>

  </div>

  <label class="radio">
    <input type="radio" name="mode" value="modify">
    Modify Shape
  </label>

  <div class="control-group indent">

    <label class="checkbox">
      <input type="checkbox" name="modify" value="rotate">
      Rotate
    </label>

    <label class="checkbox">
      <input type="checkbox" name="modify" value="resize">
      Resize
    </label>

    <label class="checkbox">
      <input type="checkbox" name="modify" value="drag">
      Drag
    </label>

  </div>

  <label class="radio">
    <input type="radio" name="mode" value="remove">
    Delete Shape
  </label>

  <div class="control-group">
    <a name="clear" class="btn btn-primary">
      <i class="icon-refresh icon-white"></i> Clear all Geometry
    </a>
  </div>

  
<label for="coverage">
Geometry ( Well-Known Text )</label>
<div class="controls">
  <textarea
        name='coverage'    class='code'    data-value='record.coverage'  ></textarea>
</div>

</div>
    </div>

    <div class="tab-pane style" id="record-form-style">
      
<div class="control-group">

  
<label>Tags</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='tags'            data-value='record.tags'          />
  </div>
</div>

  
<label>Presenter</label>
<div class="controls">
  <div class="inline-inputs">
    <select
      name='presenter'            data-value='record.presenter'    >
              <option value="None">
          None        </option>
              <option value="StaticBubble">
          Static Bubble        </option>
          </select>
  </div>
</div>

  
<label>Shape Color</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="color"
      name='vector-color'      class='preview'      data-value='record.vector_color'          />
  </div>
</div>

  
<label>Line Color</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="color"
      name='stroke-color'      class='preview'      data-value='record.stroke_color'          />
  </div>
</div>

  
<label>Selected Color</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="color"
      name='select-color'      class='preview'      data-value='record.select_color'          />
  </div>
</div>

  
<label>Shape Opacity</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='vector-opacity'      class='preview opacity'      data-value='record.vector_opacity'          />
  </div>
</div>

  
<label>Line Opacity</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='stroke-opacity'      class='preview opacity'      data-value='record.stroke_opacity'          />
  </div>
</div>

  
<label>Selected Opacity</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='select-opacity'      class='preview opacity'      data-value='record.select_opacity'          />
  </div>
</div>

  
<label>Line Width</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='stroke-width'      class='preview integer'      data-value='record.stroke_width'          />
  </div>
</div>

  
<label>Point Radius</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='point-radius'      class='preview integer'      data-value='record.point_radius'          />
  </div>
</div>

  
<label>Point Image</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='point-image'      class='preview'      data-value='record.point_image'          />
  </div>
</div>

  
<label>Min Zoom</label>
  ( <a class="use-current" name="set-min-zoom">
      Use Current
    </a> )
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='min-zoom'            data-value='record.min_zoom'          />
  </div>
</div>

  
<label>Max Zoom</label>
  ( <a class="use-current" name="set-max-zoom">
      Use Current
    </a> )
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='max-zoom'            data-value='record.max_zoom'          />
  </div>
</div>

  
<label>Default Focus</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='map-focus'            data-value='record.map_focus'          />
  </div>
</div>

  
<label>Default Zoom</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='map-zoom'            data-value='record.map_zoom'          />
  </div>
</div>

  <div class="controls">
    <div class="inline-inputs">
      <a name="set-focus" class="btn btn-small">
        <i class="icon-map-marker"></i> Use Current Viewport as Default
      </a>
    </div>
  </div>

</div>
    </div>

  </div>

  <!-- Save/Delete buttons. -->
  
<div class="actions">

  <a name="save" class="btn btn-large btn-primary" \>
    <i class="icon-ok icon-white"></i> Save  </a>

  <a
    href="#delete-modal"
    name="delete1"
    class="btn btn-large btn-inverse"
    data-toggle="modal"
  ><i class="icon-trash icon-white"></i> Delete</a>

</div>

<div id="delete-modal" class="modal hide">

  <div class="modal-header">
    <h4>Are you sure?</h4>
  </div>

  <div class="modal-body">
    <p>
      This will delete the record from the database and remove all
        associated metadata. This action cannot be undone.    </p>
  </div>

  <div class="modal-footer">

    <a name="cancel" class="btn" data-dismiss="modal">
      <i class="icon-ban-circle"></i> Cancel
    </a>

    <a name="delete2" class="btn btn-danger">
      <i class="icon-trash icon-white"></i> Yes, delete
    </a>

  </div>

</div>

  <!-- SVG modal. -->
  
<div id="svg-modal" class="modal hide">

  <div class="modal-header">
    <h4>Enter SVG</h4>
  </div>

  <div class="modal-body">

    
<label for="svg">
SVG</label>
<div class="controls">
  <textarea
        name='svg'    class='code'      ></textarea>
</div>

    
<label>Density</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='density'                  value='1.0'    />
  </div>
</div>

  </div>

  <div class="modal-footer">

    <a name="cancel" class="btn" data-dismiss="modal">
      <i class="icon-ban-circle"></i> Cancel
    </a>

    <a name="parse" class="btn btn-primary">
      <i class="icon-ok icon-white"></i> Parse
    </a>

  </div>

</div>

</script>

<script id="record-text-template" type="text/templates">

  <div class="control-group">

    
<label>Item</label>
<div class="controls">
  <div class="inline-inputs">
    <input
      type="text"
      name='item-id'            data-value='record.item_id'          />
  </div>
</div>

    
<label for="title">
Title</label>
<div class="controls">
  <textarea
        name='title'        data-value='record.title'  ></textarea>
</div>

    
<label for="body">
Body</label>
<div class="controls">
  <textarea
        name='body'        data-value='record.body'  ></textarea>
</div>

  </div>

  <!-- Save/Delete buttons. -->
  
<div class="actions">

  <a name="save" class="btn btn-large btn-primary" \>
    <i class="icon-ok icon-white"></i> Save  </a>

  <a
    href="#delete-modal"
    name="delete1"
    class="btn btn-large btn-inverse"
    data-toggle="modal"
  ><i class="icon-trash icon-white"></i> Delete</a>

</div>

<div id="delete-modal" class="modal hide">

  <div class="modal-header">
    <h4>Are you sure?</h4>
  </div>

  <div class="modal-body">
    <p>
      This will delete the record from the database and remove all
        associated metadata. This action cannot be undone.    </p>
  </div>

  <div class="modal-footer">

    <a name="cancel" class="btn" data-dismiss="modal">
      <i class="icon-ban-circle"></i> Cancel
    </a>

    <a name="delete2" class="btn btn-danger">
      <i class="icon-trash icon-white"></i> Yes, delete
    </a>

  </div>

</div>

</script>

<script id="pagination-template" type="text/templates">

  <%

    // Base fragment.
    var prev = '#records/search';
    var next = '#records/search';

    // Add existing query.
    if (!_.isEmpty(query)) {
      prev += '/query='+query;
      next += '/query='+query;
    }

    // Compute back/forward offsets.
    var prevStart = records.offset-limit;
    var nextStart = records.offset+limit;

    var prevActive = true;
    var nextActive = true;

    // Add prev offset.
    if (prevStart > 0) {
      prev += '/start='+prevStart;
    } else {
      if (_.isEmpty(query)) prev = '#records';
      if (records.offset == 0) prevActive = false;
    }

    // Add next offset.
    if (nextStart < records.count) {
      next += '/start='+nextStart;
    } else {
      next += '/start='+records.offset;
      nextActive = false;
    }

  %>

  <% if (!_.string.startsWith(query, 'map:')) { %>

    <ul class="prev-next">
      <li <% if (!prevActive) {
        %><%='class="disabled"'%><%
      } %>><a class="prev" href="<%= prev %>">«</a></li>
      <li <% if (!nextActive) {
        %><%='class="disabled"'%><%
      } %>><a class="next" href="<%= next %>">»</a></li>
    </ul>
    <div class="pagination-details">
      <span class="start"><%= records.offset+1 %></span> -
      <span class="end"><%= records.offset+records.length %></span> of
      <span class="total"><%= records.count %></span>
    </div>

  <% } %>

</script>

<script id="search-template" type="text/templates">
  <input type="text" placeholder="Search" />
</script>
